import React, { useState, useEffect } from "react";
//@ts-ignore
import useInView from "./useInView.tsx";
import { Carousel } from "react-responsive-carousel";
import "react-responsive-carousel/lib/styles/carousel.min.css";

const Testimonials = () => {
  const { ref: testimonialsRef, inView: testimonialsVisible } =
      useInView<HTMLDivElement>({ threshold: 0.2 });

  const [isMobile, setIsMobile] = useState(window.innerWidth <= 425);

  useEffect(() => {
    const handleResize = () => {
      setIsMobile(window.innerWidth <= 425);
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);


  const testimonials = [
    // Original testimonials
    {
      author: "Emily Song",
      text: "My daughter just completed her first semester at Histown and it has been an incredibly positive experience! The teachers are gracious, kind, and very knowledgeable about dance and the instructional tools/pacing needed to help students succeed at various age levels. I have been so impressed with my daughter's gross motor development!"
    },
    {
      author: "Justine Vild",
      text: "My daughter has been dancing at Histown for many years. There are lots of things I love about this studio, not the least of them being that it's a Christian dance studio. I love their scheduling. It's very easy for my daughter to take 6 hours of dance over 2 evenings. I love that the recital songs are either Christian or clean songs."
    },
    {
      author: "Kathleen Crews",
      text: "Histown provides the healthy dance experience I wanted for my daughter. The owners, teachers, and office manager have created a family-like atmosphere where dancers support and cheer for each other. There's the right amount of healthy pressure for growth with the students excited to grow as a dancer."
    },
    // New testimonials
    {
      author: "Maura Sullivan",
      text: "We have been at Histown for almost 2 years now, and the experiences that my girls (ages 5 & 7) have had (and that we have had as a family) have been invaluable. Every single thing they do here is intentional, from the instructors, to how they run their business, to the recital costumes."    },
    {
      author: "L. Garner",
      text: "Wonderful nurturing environment with Christian values. They teach children to love to dance. All children welcome. I've even seen special needs children dance with their peers. It's about the kids, not about winning. However,  there is a Histown group that does do competition!"    },
    {
      author: "Deepa S.",
      text: "We had the best time celebrating my kid’s 4th birthday at Histown Dance Studio! Ms.Mattie and Ms.Emilia did a fantastic job as hosts and very helpful throughout. The studio is spacious and kids had an amazing time. I highly recommend this place for any celebration!"    },

    {
      author: "Jennifer Kilpartrick",
      text: "My 4 year old daughter has danced at Histown for almost 2 years now. Even though she is young the lessons she has learned in class have been so valuable (following directions, body control, making friends, etc)! On top of that, she LOVES it! She dances all over the house."},


    {
      author: "Elizabeth McAlister",
      text: "Finding Histown was such a blessing! And Miss Delia Waggoner was the best first dance teacher for my little girls. She started each class by talking about how the Lord lives in their hearts and they are his princesses. She filled the hour with so much joy and enthusiasm-it was contagious! "    },
    {
      author: "Justine Vild",
      text: "My daughter has been dancing at Histown for many years. There are lots of things I love about this studio, not the least of them being that it's a Christian dance studio. I love their scheduling. It's very easy for my daughter to take 6 hours of dance over 2 evenings. They align their scheduling just right."    },
    {
      author: "Allison Hendrickson",
      text: "Excellent instruction with a superb, encouraging atmosphere. We've taken classes at other places and there is just no comparison. Highly recommend to anyone looking for a new studio!"},
    {

      author: "David",
      text: "Saw them perform at Dicken’s festival 2024 and they were great. The director witnessed for Jesus. I am glad there is a Christ-centered dance company in Franklin. I really enjoyed the show."    },


    {
      author: "Vanessa Wood",
      text: "My daughter has been dancing at this studio for two years now. As homeschoolers, it has given her a space to be consistently social with her friends and learn excellent technique."},
    {
      author: "Chaslynn Garrett",
      text: "We love HisTown! It has been a very positive, uplifting environment where parental choices are honored, children are respected, and learning in a fun environment is a top priority."},

    {
      author: "Andrea Millard",
      text: "My daughter has danced at HisTown for several years now and she has made some great friendships, matured in her dance skills, and has felt valued and part of the community there."},

     {
      author: "Megan Hord",
      text: "We have absolutely adored our time with Histown! The teachers are wonder and the owners are amazing! They are the sweetest people and communication is amazing! "},
    {
      author: "Mimi J.",
      text: "Histown Dance--What A Wonderful Studio--The Instruction is Superb. I love the Christian atmosphere and the patience and love felt by All the teachers. All Four of My Children have been Blessed to have attended Histown Dance for many years now and have benefited so richly. "},
    {
      author: "DeAnne Bruinsma",
      text: "His town dance studio was a great fit for our family with flexibility and great dance instruction from beginning to advanced. The staff and teachers care about each dancer and it shows. It has been such a positive environment for my kids to try new dance styles and develop a love for dance. I highly recommend HisTown."},
    {
      author: "Genie-Nicole Hair",
      text: "HisTown Dance Studio was referred to our family for my daughter, who is now homeschooling. We absolutely LOVE HISTOWN! They are professional, yet personable! They’ve always expressed enthusiasm and how much they love having our daughter dance with them!"},
    {
      author: "Kevin Greaves",
      text: "I cannot say enough good things about Histown. They have accepted my daughter into a class even though the semester had already started. They let us try 3 different types of classes before we chose 1. They offered a make up class when she missed due to a runny nose. Great experience all around!"},


    {
      author: "Jacquelyn Britt",
      text: "I have been a part of different dance studios for over 40 years. Histown Dance Studio surpasses them all. The owners are genuine,kind and hold high standards for their staff. The teachers have encouraged our daughter to love dance, do it in excellence and to be a part of a team."},
    {
      author: "Jennifer Nichols",
      text: "My daughter has been with his town for 3 years now. I not only love what they have taught my daughter in regards to ballet but also outside of that. They have helped I still good character qualities in her. The his town dance community is great and we love it. We are very blessed by the HisTown family."},
    {
      author: "Shailey Ratliff",
      text: "Our daughter has been so blessed to dance at HisTown for the past 2 years! The teachers take the time to love the girls well and even the other girls are encouraging and kind. Christ is at the center of everything they do and we would recommend HisTown to anyone."},
    {
      author: "Samantha Allen",
      text: "Histown dance studio is incredible. The teachers are so intentional, talented and loving. I have made so many friends through dance and many of them I am very close to. Coming to dance is my favorite part of the week, thanks to Histown!"},
    {
      author: "Amanda Cooper",
      text: "Incredible teaching, family-like environment, and amazing Christian community! Cannot say enough about how thankful I am to have danced here throughout middle and high school. Histown really is a family of believers worshiping Jesus through dance!"},


  ];



  // @ts-ignore
  return (
      <section className="testimonials-section" ref={testimonialsRef}>
        <h1
            className={`testimonials-title fade-up ${testimonialsVisible ? "show" : ""}`}
        >
          TESTIMONIALS
        </h1>
        <div
            className={`testimonial-images fade-up ${testimonialsVisible ? "show" : ""}`}
        >
          <img
              src="https://i.imgur.com/2yG3qAq.png"
              alt="Testimonial Graphic 2"
              className="testimonial-image-larger"
          />
          <img
              src="https://i.imgur.com/Kau78rI.png"
              alt="Testimonial Graphic 1"
              className="testimonial-image-larger"
          />

        </div>
        <div
            className={`testimonials-carousel fade-up ${testimonialsVisible ? "show delay-2" : ""}`}
        >
          <Carousel
              {...{
                showArrows: true,
                infiniteLoop: true,
                showThumbs: false,
                showStatus: false,
                autoPlay: false,
                interval: 6000,
                showIndicators: true,
                centerMode: false,
                className: "testimonial-carousel"
              } as any}
          >
            {isMobile ? (
                // Mobile view - show one testimonial per slide
                testimonials.map((testimonial, index) => (
                    <div className="testimonials-cards" key={index}>
                      <div className="testimonial-card">
                        <h3 className="testimonial-author">{testimonial.author}</h3>
                        <div className="testimonial-stars">⭐⭐⭐⭐⭐</div>
                        <p className="testimonial-text">{testimonial.text}</p>
                      </div>
                    </div>
                ))
            ) : (
                // Desktop view - show three testimonials per slide
                Array.from({ length: Math.ceil(testimonials.length / 3) }).map((_, groupIndex) => (
                    <div className="testimonials-cards" key={groupIndex}>
                      {testimonials.slice(groupIndex * 3, groupIndex * 3 + 3).map((testimonial, index) => (
                          <div key={index} className="testimonial-card">
                            <h3 className="testimonial-author">{testimonial.author}</h3>
                            <div className="testimonial-stars">⭐⭐⭐⭐⭐</div>
                            <p className="testimonial-text">{testimonial.text}</p>
                          </div>
                      ))}
                    </div>
                ))
            )}
          </Carousel>
        </div>
      </section>
  );
};

export default Testimonials;
